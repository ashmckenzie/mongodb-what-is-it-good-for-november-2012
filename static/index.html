<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>MongoDB - What is it (good for) ?</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" />

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

   <script type="text/javascript" src="./js/sh_lang/sh_sh.min.js"></script>

   <script type="text/javascript" src="./js/sh_lang/sh_javascript.min.js"></script>

   <link rel="stylesheet" href="./file/styles.css" type="text/css"/>

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>
<a tabindex="1" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="stylemenu"><span class="ui-icon ui-icon-triangle-1-s"></span>styles</a>
<div id="stylepicker" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">g</td><td>toggle follow</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
    <tr><td class="key">P</td><td>toggle pause</td></tr>
    <tr><td class="key">s</td><td>choose style</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="followMode">Follow Mode:</span>
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-1" class="main">
  <div class="content bullets" ref="slides/slides/1">
<p style="margin-top: -100px"><img src="./file/slides/mongodb.png" alt="MongoDB"/>

<h1>What is it (good for) ?</h1></p>

<div>
</div>
</div></div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-2" class="main">
  <div class="content bullets" ref="slides/slides/2">
<h1>What is MongoDB ?</h1>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Document-oriented_database">Document oriented database</a></li>
<li>Considered a 'NoSQL' database system</li>
<li>
<a href="http://en.wikipedia.org/wiki/MongoDB#History">Originally one piece of a PaaS</a> but proved very popular</li>
<li>Mongo comes from 'hu<strong>mongo</strong>us', developed by <a href="http://10gen.com">10gen</a>
</li>
</ul></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-3" class="main">
  <div class="content bullets" ref="slides/slides/3">
<h1>Why MongoDB ?</h1>

<ul>
<li>Rapid software development due to 'schema-less' design</li>
<li>No concept of migrations (good and bad)</li>
<li>Onus is on developer to ensure schema consistency</li>
<li>Great Ruby ODM libraries - <a href="http://mongoid.org">Mongoid</a>, <a href="http://mongomapper.com">MongoMapper</a>
</li>
<li>Fun to use!</li>
</ul></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-4" class="main">
  <div class="content bullets" ref="slides/slides/4">
<h1>Features</h1>

<ul>
<li>Stores data in JSON format (actually <a href="http://en.wikipedia.org/wiki/BSON">BSON</a>)</li>
<li>Supports indexing (primary, secondary, compound)</li>
<li>Sharding support out-of-the-box</li>
<li>JavaScript style querying (weird at first)</li>
</ul></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-5" class="main">
  <div class="content bullets smbullets" ref="slides/slides/5">
<h1>Basics</h1>

<ul>
<li>Database == Database</li>
<li>Collection == Table</li>
<li>Document == Row</li>
<li>Each Document has a unique <code>_id</code> (ObjectId)</li>
</ul></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-6" class="main">
  <div class="content bullets smbullets" ref="slides/slides/6">
<h1>ObjectId</h1>

<ul>
<li>An ObjectId is a unique identifier and made up of:</li>
</ul><p>e.g. 47cc67093475061e3d95369d</p>

<table>
<tr>
<td>47cc6709</td>
    <td>347506</td>
    <td>1e3d</td>
    <td>95369d</td>
  </tr>
<tr>
<td>Signed epoch (4b)</td>
    <td>First three bytes of MAC MD5 (3b)</td>
    <td>PID of client process (2b)</td>
    <td>Incrementing, starts random (3b)</td>
  </tr>
</table><p>The reason behind the large number is to ensure uniqueness across clusters</p></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-7" class="main">
  <div class="content bullets" ref="slides/slides/7">
<h1>The mongo shell</h1>

<pre class="sh_sh"><code>$ mongo trawler
MongoDB sh version: 2.2.1
connecting to: trawler
&gt;</code></pre></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-8" class="main">
  <div class="content" ref="slides/slides/8">
<h1>mongo sh quickies</h1>

<table>
<tr>
<td><pre class="sh_sourceCode sh_javascript"><code>help</code></pre></td>
    <td>Lists available help</td>
  </tr>
<tr>
<td><pre class="sh_sourceCode sh_javascript"><code>show dbs</code></pre></td>
    <td>Show available databases</td>
  </tr>
<tr>
<td><pre class="sh_sourceCode sh_javascript"><code>use trawler</code></pre></td>
    <td>Select trawler database</td>
  </tr>
<tr>
<td><pre class="sh_sourceCode sh_javascript"><code>db.log_entries.findOne()</code></pre></td>
    <td>Selects single Document from<br> log_entries Collection</br>
  </td>
<tr>
<td><pre class="sh_sourceCode sh_javascript"><code>db.log_entries.find({ status_code: 200 }).count()</code></pre></td>
    <td>Count the number of Documents that<br> have a status_code of 200</br>
  </td>
</tr><p>* Most commands also support TAB completion</p></tr>

<div>
</div>
</table></div></div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-9" class="main">
  <div class="content bullets" ref="slides/slides/9">
<h1>Inserting Documents</h1>

<p>Insert a single Document</p>

<pre class="sh_sh"><code>db.users.insert({ name: 'Snake', languages: [ 'eng' ] })</code></pre>

<p>Insert with a another Document as a reference (think JOIN)</p>

<pre class="sh_sh"><code>db.groups.insert({ name: 'Cool Guys' })
cool_guys = db.groups.findOne({ name: 'Cool Guys' })
db.users.insert({ name: 'Snake', groups: [ cool_guys._id ] })</code></pre></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-10" class="main">
  <div class="content bullets" ref="slides/slides/10">
<h1>Updating Documents</h1>

<p>Update a single Document</p>

<pre class="sh_sh"><code>db.users.update({ name: 'Snake' }, { name: 'Johnny', languages: [ 'eng', 'esp' ] })</code></pre>

<p>Push a new language to a Document</p>

<pre class="sh_sh"><code>db.users.update({ name: 'Johnny' }, { '$push': { languages: 'fr' }})</code></pre>

<p>Update an individual attribute within the Document</p>

<pre class="sh_sh"><code>db.users.update({ name: 'Johnny' }, { '$set': { cool: true }})</code></pre>

<p>Upsert a Document</p>

<pre class="sh_sh"><code>db.users.update({ name: 'Johnny' }, { name: 'Johnny', cool: true }, true)</code></pre></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-11" class="main">
  <div class="content bullets" ref="slides/slides/11">
<h1>Removing Documents</h1>

<p>Remove a single Document</p>

<pre class="sh_sh"><code>db.users.remove({ name: 'Johnny' })</code></pre>

<p>Remove all Documents from a Collection</p>

<pre class="sh_sh"><code>db.users.remove()</code></pre></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-12" class="main">
  <div class="content bullets" ref="slides/slides/12">
<h1>Querying Documents</h1>

<p>Find by ObjectId</p>

<pre class="sh_sh"><code>db.users.find({ _id: ObjectId('50a5eb398463e9d710000014') })</code></pre>

<p>Find all Documents with a status code &gt;= 200 and &lt;= 302</p>

<pre class="sh_sh"><code>db.log_entries.find({ status_code: {'$gte': 200, '$lte': 302 } })</code></pre>

<p><a href="http://www.mongodb.org/display/DOCS/Geospatial+Indexing">Geospatial</a> lookup (sorted by distance)</p>

<pre class="sh_sh"><code>db.log_entries.find({ loc : { $near : [ -37.788, 144.971 ], $maxDistance: 5 }})</code></pre></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-13" class="main">
  <div class="content bullets" ref="slides/slides/13">
<h1>Aggregation framework</h1>

<ul>
<li>Arrived in v2.2 (current stable)</li>
<li>Alternative to MapReduce (easier)</li>
<li>Includes <code>count</code>, <code>distinct</code>, <code>group</code>
</li>
<li><a href="http://www.mongodb.org/display/DOCS/Aggregation">Aggregation docs</a></li>
</ul></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-14" class="main">
  <div class="content bullets" ref="slides/slides/14">
<h1>HTTP interface</h1>

<p><a href="http://localhost:28017">http://localhost:28017</a></p></div>

<div>
</div>
</div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-15" class="main">
  <div class="content bullets" ref="slides/slides/15">
<h1 style="margin-top: -50px">MongoDB use case</h1>

<h2>Trawler</h2>

<p><img src="./file/slides/trawler.png" alt="Trawler"/>

<ul>
<li>Sinatra app using Mongoid</li>
<li>Throw log files in, trawl them</li>
</ul></p>

<div>
</div>
</div></div></div><div class="slide" data-transition="none"><header>
  <p id="title">MongoDB - What is it (good for) ?</p>
  <img src="images/logo.png"/>
</header>

<div id="slide-16" class="main">
  <div class="content bullets" ref="slides/slides/16">
<h1>Handy links</h1>

<ul>
<li><a href="http://docs.mongodb.org/manual/">MongoDB Manual</a></li>
<li><a href="http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart">SQL to Mongo mapping chart</a></li>
<li><a href="https://github.com/estolfo/presentations/blob/master/Schema-design/Schema%20Design%20By%20Example.pdf?raw=true">Schema Design with Emily Stolfo</a></li>
</ul></div>

<div>
</div>
</div></div></div>
<div id="pauseScreen">
  PAUSED
</div>

</body>
</html>
